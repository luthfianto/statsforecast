---

title: Adapters for Prophet


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/adapters.prophet.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/adapters.prophet.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2022-07-25 10:51:50 prophet.plot ERROR: Importing plotly failed. Interactive plots will not work.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Arima">Arima<a class="anchor-link" href="#Arima"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="AutoARIMAProphet" class="doc_header"><code>class</code> <code>AutoARIMAProphet</code><a href="https://github.com/Nixtla/statsforecast/tree/main/statsforecast/adapters/prophet.py#L39" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>AutoARIMAProphet</code>(<strong><code>growth</code></strong>=<em><code>'linear'</code></em>, <strong><code>changepoints</code></strong>=<em><code>None</code></em>, <strong><code>n_changepoints</code></strong>=<em><code>25</code></em>, <strong><code>changepoint_range</code></strong>=<em><code>0.8</code></em>, <strong><code>yearly_seasonality</code></strong>=<em><code>'auto'</code></em>, <strong><code>weekly_seasonality</code></strong>=<em><code>'auto'</code></em>, <strong><code>daily_seasonality</code></strong>=<em><code>'auto'</code></em>, <strong><code>holidays</code></strong>=<em><code>None</code></em>, <strong><code>seasonality_mode</code></strong>=<em><code>'additive'</code></em>, <strong><code>seasonality_prior_scale</code></strong>=<em><code>10.0</code></em>, <strong><code>holidays_prior_scale</code></strong>=<em><code>10.0</code></em>, <strong><code>changepoint_prior_scale</code></strong>=<em><code>0.05</code></em>, <strong><code>mcmc_samples</code></strong>=<em><code>0</code></em>, <strong><code>interval_width</code></strong>=<em><code>0.8</code></em>, <strong><code>uncertainty_samples</code></strong>=<em><code>1000</code></em>, <strong><code>stan_backend</code></strong>=<em><code>None</code></em>, <strong><code>d</code></strong>=<em><code>None</code></em>, <strong><code>D</code></strong>=<em><code>None</code></em>, <strong><code>max_p</code></strong>=<em><code>5</code></em>, <strong><code>max_q</code></strong>=<em><code>5</code></em>, <strong><code>max_P</code></strong>=<em><code>2</code></em>, <strong><code>max_Q</code></strong>=<em><code>2</code></em>, <strong><code>max_order</code></strong>=<em><code>5</code></em>, <strong><code>max_d</code></strong>=<em><code>2</code></em>, <strong><code>max_D</code></strong>=<em><code>1</code></em>, <strong><code>start_p</code></strong>=<em><code>2</code></em>, <strong><code>start_q</code></strong>=<em><code>2</code></em>, <strong><code>start_P</code></strong>=<em><code>1</code></em>, <strong><code>start_Q</code></strong>=<em><code>1</code></em>, <strong><code>stationary</code></strong>=<em><code>False</code></em>, <strong><code>seasonal</code></strong>=<em><code>True</code></em>, <strong><code>ic</code></strong>=<em><code>'aicc'</code></em>, <strong><code>stepwise</code></strong>=<em><code>True</code></em>, <strong><code>nmodels</code></strong>=<em><code>94</code></em>, <strong><code>trace</code></strong>=<em><code>False</code></em>, <strong><code>approximation</code></strong>=<em><code>False</code></em>, <strong><code>method</code></strong>=<em><code>None</code></em>, <strong><code>truncate</code></strong>=<em><code>None</code></em>, <strong><code>test</code></strong>=<em><code>'kpss'</code></em>, <strong><code>test_kwargs</code></strong>=<em><code>None</code></em>, <strong><code>seasonal_test</code></strong>=<em><code>'seas'</code></em>, <strong><code>seasonal_test_kwargs</code></strong>=<em><code>None</code></em>, <strong><code>allowdrift</code></strong>=<em><code>False</code></em>, <strong><code>allowmean</code></strong>=<em><code>False</code></em>, <strong><code>blambda</code></strong>=<em><code>None</code></em>, <strong><code>biasadj</code></strong>=<em><code>False</code></em>, <strong><code>parallel</code></strong>=<em><code>False</code></em>, <strong><code>num_cores</code></strong>=<em><code>2</code></em>, <strong><code>period</code></strong>=<em><code>1</code></em>) :: <code>Prophet</code></p>
</blockquote>
<p>Returns best ARIMA model using external variables created
by the Prophet interface.</p>
<p>This class receives as parameters the same as prophet.Prophet
and statsforecast.arima.AutoARIMA.</p>
<p>If your pipeline uses Prophet you can simply replace Prophet
with AutoARIMAProphet and you'll be using AutoARIMA instead
of Prophet.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Peyton-Manning-example">Peyton Manning example<a class="anchor-link" href="#Peyton-Manning-example"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/facebook/prophet/main/examples/example_wp_log_peyton_manning.csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Without-additional-info">Without additional info<a class="anchor-link" href="#Without-additional-info"> </a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Usually, a Prophet pipeline without external regressors looks like this.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">Prophet</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">make_future_dataframe</span><span class="p">(</span><span class="mi">365</span><span class="p">)</span>
<span class="n">forecast</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">future</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">forecast</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>With the class <a href="/statsforecast/adapters.prophet.html#AutoARIMAProphet"><code>AutoARIMAProphet</code></a> you can simply replace <code>Prophet</code> and you'll be training an <a href="/statsforecast/models.html#auto_arima"><code>auto_arima</code></a> model without changing the pipeline.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">AutoARIMAProphet</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">make_future_dataframe</span><span class="p">(</span><span class="mi">365</span><span class="p">)</span>
<span class="n">forecast</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">future</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">forecast</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="With-exogenous-regressors-provided-by-prophet">With exogenous regressors provided by prophet<a class="anchor-link" href="#With-exogenous-regressors-provided-by-prophet"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Usually <code>Prophet</code> pipelines include the usage of external regressors such as holidays.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">playoffs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
  <span class="s1">&#39;holiday&#39;</span><span class="p">:</span> <span class="s1">&#39;playoff&#39;</span><span class="p">,</span>
  <span class="s1">&#39;ds&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s1">&#39;2008-01-13&#39;</span><span class="p">,</span> <span class="s1">&#39;2009-01-03&#39;</span><span class="p">,</span> <span class="s1">&#39;2010-01-16&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;2010-01-24&#39;</span><span class="p">,</span> <span class="s1">&#39;2010-02-07&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-01-08&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;2013-01-12&#39;</span><span class="p">,</span> <span class="s1">&#39;2014-01-12&#39;</span><span class="p">,</span> <span class="s1">&#39;2014-01-19&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;2014-02-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2015-01-11&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-01-17&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;2016-01-24&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-02-07&#39;</span><span class="p">]),</span>
  <span class="s1">&#39;lower_window&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s1">&#39;upper_window&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">})</span>
<span class="n">superbowls</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
  <span class="s1">&#39;holiday&#39;</span><span class="p">:</span> <span class="s1">&#39;superbowl&#39;</span><span class="p">,</span>
  <span class="s1">&#39;ds&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s1">&#39;2010-02-07&#39;</span><span class="p">,</span> <span class="s1">&#39;2014-02-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-02-07&#39;</span><span class="p">]),</span>
  <span class="s1">&#39;lower_window&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="s1">&#39;upper_window&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">})</span>
<span class="n">holidays</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">((</span><span class="n">playoffs</span><span class="p">,</span> <span class="n">superbowls</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Prophet</span><span class="p">(</span><span class="n">holidays</span><span class="o">=</span><span class="n">holidays</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">add_country_holidays</span><span class="p">(</span><span class="n">country_name</span><span class="o">=</span><span class="s1">&#39;US&#39;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">make_future_dataframe</span><span class="p">(</span><span class="mi">365</span><span class="p">)</span>
<span class="n">forecast</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">future</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">forecast</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The class <a href="/statsforecast/adapters.prophet.html#AutoARIMAProphet"><code>AutoARIMAProphet</code></a> allows you to handle these scenarios to fit an <a href="/statsforecast/models.html#auto_arima"><code>auto_arima</code></a> model with exogenous variables.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%capture</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">AutoARIMAProphet</span><span class="p">(</span><span class="n">holidays</span><span class="o">=</span><span class="n">holidays</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">add_country_holidays</span><span class="p">(</span><span class="n">country_name</span><span class="o">=</span><span class="s1">&#39;US&#39;</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">make_future_dataframe</span><span class="p">(</span><span class="mi">365</span><span class="p">)</span>
<span class="n">forecast</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">future</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">forecast</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>


